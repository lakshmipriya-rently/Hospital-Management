<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Hospital Management" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>
    <%= javascript_importmap_tags %>
    <style>

body {
  background-color: #f4f7fa; /* Light soft blue-gray */
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}


.custom-navbar {
  background-color: #3A9AD9; /* Primary blue */
}

.custom-navbar .nav-link {
  color: #fff;
  font-weight: 800;
  transition: color 0.3s ease;
}

.custom-navbar .nav-link:hover {
  color: #e0f0ff;
}


.custom-navbar .btn-light {
  background-color: #fff;
  color: #3A9AD9;
  border: 1px solid #fff;
  transition: all 0.3s ease;
}

.custom-navbar .btn-light:hover {
  background-color: #007BBA;
  color: #fff;
  border-color: #007BBA;
}


.alert {
  border-radius: 0.5rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}


footer {
  background-color: #e9ecef; /* Very light gray */
  color: #495057;
  font-size: 0.9rem;
}

footer a {
  color: #3A9AD9;
  text-decoration: none;
}

footer a:hover {
  text-decoration: underline;
}


main > .container-fluid {
  background-color: #fff;
  border-radius: 0.75rem;
  padding: 2rem;
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  flex-grow: 1; /* Fill remaining vertical space */
  display: flex;
  flex-direction: column;
}



@media (max-width: 576px) {
  .custom-navbar .nav-link,
  .custom-navbar .btn-light {
    font-size: 0.9rem;
  }

  main > .container-fluid {
    padding: 1rem;
  }
}
</style>
<%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.css" %>
 <script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.js"></script>


  </head>
  
  

<body class="bg-light d-flex flex-column min-vh-100">

 

    <!-- Navbar -->
<nav class="navbar navbar-expand-lg shadow-sm py-3 custom-navbar">
  <div class="container-fluid px-5">
    <a class="navbar-brand fw-bold text-white" href="/" style="font-size: 1.4rem;">
      ğŸ¥ Hospital Management
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <%= link_to "Surgeries", surgeries_path, class: "nav-link" %>
        </li>
        <% if user_signed_in? && current_user.userable_type == "Doctor" %>
          <li class="nav-item">
            <%= link_to "Add Surgery", new_surgery_path, class: "nav-link" %>
          </li>
        <% end %>
        <% if user_signed_in? && current_user&.userable_type == "Doctor" || current_user&.userable_type == "Patient" %>
          <li class="nav-item">
            <%= link_to "View Doctors", patients_path, class: "nav-link" %>
          </li>
        <% else %>
         <li class="nav-item">
            <%= link_to "View Doctors", new_user_session_path, class: "nav-link" %>
          </li>
        <% end %>
        <% if user_signed_in? && current_user&.userable_type == "Doctor" || current_user&.userable_type == "Patient" %>
          <li class="nav-item">
            <%= link_to "Profile", patient_path(current_user&.userable.id), class: "nav-link" %>
          </li>
        <% end %>
      </ul>

      <div class="d-flex">
        <% if user_signed_in? %>
<%= button_to "Logout", destroy_user_session_path, 
    method: :delete, # This ensures the form sends DELETE
    class: "btn btn-light ms-2 px-4 fw-semibold shadow-sm" # Apply your styling here
%>        <% else %>
          <%= link_to "Login", new_user_session_path, class: "btn btn-light me-2 px-4 fw-semibold shadow-sm" %>
          <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-light me-2 px-4 fw-semibold shadow-sm" %>
        <% end %>
      </div>
    </div>
  </div>
</nav>

<% flash.each do |type, message| %>
  <% bs_class = case type.to_sym
     when :notice then 'success'
     when :alert  then 'danger'
     when :error  then 'danger'
     when :warning then 'warning'
     else type.to_s
     end %>

  <div class="container-fluid px-5 mt-4">
    <div class="alert alert-<%= bs_class %> alert-dismissible fade show shadow-sm" role="alert">
      <div class="d-flex justify-content-between align-items-start">
        <div><%= message %></div>
        <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    </div>
  </div>
<% end %>
   
  <main class="flex-fill d-flex">
    <div class="container-fluid py-4 px-5 flex-grow-1">
      <%= yield %>
    </div>
  </main>

    <!-- Footer -->
    <footer class="bg-white text-muted text-center py-3 mt-auto border-top">
      <small>&copy; <%= Time.current.year %> Hospital Management. All rights reserved.</small>
    </footer>
  </body>
</html>
